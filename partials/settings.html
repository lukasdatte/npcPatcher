<div id="lukasNpcPatcherSettings" class="">
    
    <style>
        
        .npc-button {
            transition: all 0.3s;
            /*box-shadow: 1.2px 1.5px 2px 0 rgba(8, 8, 8, 0.21176), inset 1px 1px 2px 0 #fff;*/
            color: #4e4e4e;
            width: 100%;
            border: 2px solid #4e4e4e;
            border-radius: 10px;
            padding: 0.4em 0.7em;
            text-align: center;
            cursor: pointer;
            user-select: none;
            background: none;
            font-weight: bold;
        }
        
        .dark-theme .npc-button {
            color: #CCC;
            box-shadow: 1.2px 1.5px 2px 0 rgba(255, 255, 255, 0.47);
            border: 2px solid #CCC;
        }

        .npc-button:hover {
            background-color: #ececec;
        }

        .dark-theme .npc-button:hover {
            background-color: #545454;
        }

        .dark-theme .npc-button.npc-reversed-theme:hover {
            background-color: #ececec;
            border-color: #ececec;
        }

        .npc-button.npc-reversed-theme:hover {
            background-color: black;
            border-color: black;
        }
        
        .mod-type-label {
            margin: 0 0.5em;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .mod-type-input:checked + .mod-type-label, .npc-button.npc-reversed-theme {
            background-color: #4e4e4e;
            color: white;
            border-color: #4e4e4e;
        }
        
        .dark-theme .mod-type-input:checked + .mod-type-label, .dark-theme .npc-button.npc-reversed-theme {
            background-color: #CCC;
            color: black;
            border-color: #CCC;
        }
        
        .mod-type-input {
            display: none;
        }
        
        /*Center*/
        .mod-type-container {
            display: flex;
            flex-flow: row;
        }
        
        .mod-type-container :nth-child(2), .mod-type-container :last-child {
            margin: 0;
        }
        
        .mod-name {
            margin: 1em 0 0.5em;
            font-size: 1em;
        }
        
        .npc-button-load {
            margin-bottom: 1em;
        }
        
        section.npc-top {
            margin-bottom: 2em;
        }
        
        #lukasNpcPatcherSettings fieldset {
            border: none;
            padding: 0;
            margin: 0.5em 0 1.5em 0;
        }
        
        #lukasNpcPatcherSettings * {
            font-size: 14px;
        }


        #lukasNpcPatcherSettings .npc-mod-filter-container {
            margin-top: -30px;
            margin-bottom: 1.5em;
        }
        
        .form__group {
            position: relative;
            padding: 30px 0 0;
            margin-top: 10px;
        }
        
        .form__field {
            font-family: inherit;
            width: 100%;
            border: 0;
            border-bottom: 2px solid #9b9b9b;
            outline: 0;
            font-size: 1.3rem;
            /*color: #fff;*/
            padding: 7px 0;
            background: transparent;
            transition: border-color 0.2s;
        }
        
        .form__field::placeholder {
            color: transparent;
        }
        
        .form__field:placeholder-shown ~ .form__label {
            font-size: 1.3rem;
            cursor: text;
            top: 20px;
        }
        
        .form__label {
            position: absolute;
            top: 0;
            display: block;
            transition: 0.2s;
            font-size: 1rem;
            /*color: #9b9b9b;*/
        }
        
        .form__field:focus {
            /*padding-bottom: 6px;*/
            font-weight: 700;
            border-width: 3px;
            margin-bottom: -1px;
            border-image: linear-gradient(to right, #11998e, #38ef7d);
            border-image-slice: 1;
        }
        
        .form__field:focus ~ .form__label {
            position: absolute;
            top: 0;
            display: block;
            transition: 0.2s;
            font-size: 1rem;
            color: #11998e;
            font-weight: 700;
        }
        
        /* reset input */
        .form__field:required, .form__field:invalid {
            box-shadow: none;
        }

        .dark-theme .npc-arrow {
            border: solid #CCC;
        }
        
        .npc-arrow { /*See: https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_arrows*/
            border: solid black;
            border-width: 0 3px 3px 0 !important;
            display: inline-block;
            padding: 3px;
        }

        .npc-arrow-up {
            transform: rotate(-135deg);
        }

        .npc-arrow-down {
            transform: rotate(45deg);
        }

        .npc-arrows-container {
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .npc-arrows-container div {
            margin: 0 10px;
        }

        .npc-empty-list-warning {
    
            border: 4px solid red;
            padding: 10px 15px;
        }

        .npc-description {
            overflow: hidden;
            transition: 5s ease-in-out;
        }
        
        .npc-hide-description {
            margin: 10px 0;
        }
        

        .npc-hide-description npc-arrow {
            position: relative;
            top: -2px;
            margin-left: 3px;
        }
    
    </style>
    
    <section class="npc-top">
    
    <h2>Lukas' NPC Patcher</h2>
        
        <div class="npc-description" ng-show="!hideDescription" ng-animate="'height'">
            This patcher is meant to fix the Black face problem which is produced by overriding look Mods. <br/>
            While it does that, it will search the whole npc for any changes to its' looks. It will take the latest change that isn't identical to any base mod and merges it to any changes the lastest looks mod did. That means it will make a NPC Overlaul (like i.e. Diversity or Bijinn) mod compatible with i.e. Immersive Weapons. But beware that when more non looks mods edit one NPC, it will lake the data from the lastest.<br/>
            <h3>Configure</h3>
            But first you need to do some Configuring. If you press the Button down below, the tool will search all Mods that are editing humanoid NPCs.
            <ul>
                <li>
                    <h4>Base</h4>
                    Base Mods are mods or esp/ems files like Skyrim.esm or (UUESP) Unofficial Skyrim SE Patch. Those mods provide the base of the game. If you mark Skyrim a base mod, the patcher will know how it's NPCs look. Any mods that will make NPCs look the same, will not be flagged as looks mods.
                </li>
                <li>
                    <h4>Look Mods</h4>
                    Looks mods are mods that change an NPCs looks compared to base mods. You can't configure Looks Mods sice that is don automatically on a NPC by NPC basis.<br/>
                </li>
                <li>
                    <h4>Copy Non Looks</h4>
                    Non Looks Mods are Mods, that edit an NPC but don't change it's looks. If you flag a Mod as "Copy Non Looks" the Patcher knows where to copy any changes made by the latest looks mod. It will take the latest change by a looks mod and merges it to any changes the lastest non looks mod did.
                </li>
                <li>
                    <h4>Ignore</h4>
                    The Patcher will siply ignore this Mod.
                </li>
                <li>
                    <h4>Force No Patch</h4>
                    If a NPC is edited by a Mod you flagged "Force No Patch" the Patcher will patch not patch this NPC.
                </li>
            </ul>
        </div>
        
        <button class="npc-button npc-hide-description npc-arrows-container" ng-click="hideDescription = !hideDescription">
            <i class="npc-arrow {{hideDescription ? 'npc-arrow-down' : 'npc-arrow-up'}}"></i>
            <div>{{hideDescription ? "Show" : "Hide"}} description </div>
            <i class="npc-arrow {{hideDescription ? 'npc-arrow-down' : 'npc-arrow-up'}}"></i>
        </button>
    
        <button class="npc-button npc-reversed-theme npc-button-load " ng-click="loadNpcMods()">Load NPC modifying Mods</button>
    </section>
    
    <section class="npc-mod-list">
        <h2>Mods:</h2>
        <div class="npc-mod-filter-container npc-arrows-container form__group" ng-show="npcModsMd.length > 0">
            <input class="npc-mod-filter-input form__field" type="text" name="npc-mod-filter" id="npc-mod-filter" ng-model="filter" placeholder="Filter" ng-change="filterMods(filter)"/>
            <label class="npc-mod-filter-label form__label" for="npc-mod-filter">Filter (RegEx)</label>
        </div>
        <div>
            <div class="npc-mod" ng-repeat="mod in npcModsMd" ng-show="!mod.invisible">
                <div class="md-list-item-text">
                    <span class="mod-name">{{mod.modName}}</span>
                    <fieldset>
                        <div class="mod-type-container">
                            <input id="{{mod.modName + '-' + type.value}}" class="mod-type-input" ng-repeat-start="type in modTypes" ng-model="mod.type" type="radio" ng-value="type.value"/>
                            <label for="{{mod.modName + '-' + type.value}}" class="mod-type-label npc-button" ng-repeat-end><span>{{ type.label }}</span></label>
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
    
        <div class="npc-empty-list-warning npc-arrows-container" ng-show="npcModsMd.length === 0">
                <i class="npc-arrow npc-arrow-up"></i>
                <div>
                    Please press <b>"Load NPC modifying Mods"</b> above. zEdit will be unresponsive for a minute.<br/>
                    You should do this when you installed any NPC related mod, that was never loaded via this button.<br/>
                    The tool saves your settings, even the settings of removed mods &#x1F61C
                </div>
                <i class="npc-arrow npc-arrow-up"></i>
        </div>
    
    </section>
</div>
